(this.webpackJsonpstudentbasefront=this.webpackJsonpstudentbasefront||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n(23),s=n.n(c),i=(n(49),n(12)),l=n(13),u=n(15),o=n(14),d=(n(50),n(80)),h=n(82),b=n(79),j=n(19),p=n(10),f=n(20),O="SHOW_ALERT",v="HIDE_ALERT",m="REQUEST_SEARCH_RESULT",x="FETCH_SEARCH_RESULT",y="REQUEST_TABLE_FIELDS",g="FETCH_TABLE_FIELDS",N="ADD_NEW_ENTITY",S="DELETE_ENTITY";function k(){return{type:v}}var C=n(81);function E(e){return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:Object(a.jsx)("p",{children:e})})}var T=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={id:"",alert:a.props.alert,result:a.props.result},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.props.result!==e.result&&this.setState({result:this.props.result}),this.props.alert!==e.alert&&this.setState({alert:this.props.alert})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.fetchSearchResult(this.state.id)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"renderTable",value:function(e){for(var t=[],n=function(n){var r=e[n],c=Object(a.jsx)("tr",{children:Object.keys(r).map((function(e){return Object(a.jsx)("td",{children:r[e]})}))});t.push(c)},r=0;r<e.length;r++)n(r);return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object.keys(e[0]).map((function(e){return Object(a.jsx)("th",{scope:"col",children:e})}))}),Object(a.jsx)("tbody",{children:t})]})})}},{key:"render",value:function(){var e=this.state,t=e.result,n=e.alert,r=0!==t.length?this.renderTable(t):null,c=n.state?E(n.error):null;return Object(a.jsxs)("div",{children:[c,Object(a.jsx)("div",{className:"jumbotron",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("h1",{className:"display-3",children:" Search in database "})})}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("form",{className:"input-group mb-3",onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{className:"form-control mr-sm-2",placeholder:"Id",type:"text",name:"id",onChange:this.handleChange}),Object(a.jsx)("button",{className:"btn btn-secondary",type:"submit",children:"Search"})]}),Object(a.jsx)("div",{children:r})]})]})}}]),n}(n(1).Component);var w={fetchSearchResult:function(e){return{type:m,data:{id:e}}}},F=Object(C.a)(Object(f.b)((function(e){return{result:e.fetchReducer.result,alert:e.app.alert}}),w)(T)),D=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderButtons",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.getButton(e[n][0],e[n][1]));return t}},{key:"getButton",value:function(e,t){return Object(a.jsx)("div",{className:"col-md-3",children:Object(a.jsx)("p",{children:Object(a.jsxs)("a",{className:"btn btn-secondary btn-lg",role:"button",href:e,children:[" ",t," "]})})})}},{key:"render",value:function(){var e=this.renderButtons([["search","Search"],["add","Add value"],["remove","Remove value"]]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"jumbotron",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h1",{className:"display-3",children:" Database web application "}),Object(a.jsx)("p",{className:"lead",children:" A simple webapp for the included database. Please select one of the actions below "})]})}),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"row",children:e})})]})}}]),n}(r.Component),R=Object(C.a)(D),_=n(43),A=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={fields:a.props.fields,alert:a.props.alert},a.handleFieldChange=a.handleFieldChange.bind(Object(p.a)(a)),a.handleFieldsSubmit=a.handleFieldsSubmit.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.props.fetchTableFields(),a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.fields!==e.fields){for(var a=new Map,r=0;r<this.props.fields.length;r++)a.set(this.props.fields[r],"");this.setState({fields:a})}this.props.alert!==e.alert&&this.setState({alert:this.props.alert})}},{key:"handleFieldsSubmit",value:function(e){e.preventDefault(),this.props.addNewEntity(this.emptyToNull(this.state.fields))}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleFieldChange",value:function(e){e.preventDefault(),this.state.fields.set(e.target.name,e.target.value)}},{key:"emptyToNull",value:function(e){var t=new Map;return e.forEach((function(e,n){""===e?t.set(n,null):t.set(n,e)})),console.log("fieldsWithNull",t),t}},{key:"renderForm",value:function(e){var t,n=[],r=Object(_.a)(e.keys());try{for(r.s();!(t=r.n()).done;){var c=t.value,s=Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{className:"form-control",placeholder:c,type:"text",name:c,onChange:this.handleFieldChange})});n.push(s)}}catch(i){r.e(i)}finally{r.f()}return Object(a.jsxs)("form",{className:"form-group",onSubmit:this.handleFieldsSubmit,children:[n,Object(a.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Add"})]})}},{key:"render",value:function(){var e=this.state,t=e.fields,n=e.alert,r=0!==t.length?this.renderForm(t):null,c=n.state?E(n.error):null;return Object(a.jsxs)("div",{children:[c,Object(a.jsx)("div",{className:"jumbotron",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("h1",{className:"display-3",children:" Add to database "})})}),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{children:r})})]})}}]),n}(n(1).Component);var L={fetchTableFields:function(){return{type:y}},addNewEntity:function(e){return{type:N,data:{entity:e}}}},I=Object(C.a)(Object(f.b)((function(e){return{fields:e.fetchReducer.fields,alert:e.app.alert}}),L)(A)),B=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={id:"",alert:a.props.alert},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.props.alert!==e.alert&&this.setState({alert:this.props.alert})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.deleteEntity(this.state.id)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state.alert,t=e.state?E(e.error):null;return Object(a.jsxs)("div",{children:[t,Object(a.jsx)("div",{className:"jumbotron",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("h1",{className:"display-3",children:" Remove from database "})})}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{className:"input-group mb-3",onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{className:"form-control mr-sm-2",placeholder:"Id",type:"text",name:"id",onChange:this.handleChange}),Object(a.jsx)("button",{className:"btn btn-secondary",type:"submit",children:"Delete"})]})})]})}}]),n}(n(1).Component);var U={deleteEntity:function(e){return{type:S,data:{id:e}}}},H=Object(C.a)(Object(f.b)((function(e){return{alert:e.app.alert}}),U)(B)),P=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(d.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(b.a,{path:"/",exact:!0,component:R}),Object(a.jsx)(b.a,{path:"/search",exact:!0,component:F}),Object(a.jsx)(b.a,{path:"/add",exact:!0,component:I}),Object(a.jsx)(b.a,{path:"/remove",exact:!0,component:H})]})})})}}]),n}(r.Component),J=(n(57),n(18)),W=n(42),M=n(11),Q=n.n(M),Y=n(7),q=n(59);function z(e){return q.get("/api/student/search/".concat(e.id)).then((function(e){return e.data}))}function G(){return q.get("/api/student/add/fields").then((function(e){return e.data}))}function K(e){var t=Object.fromEntries(e.entity);return q({method:"POST",url:"api/student/add",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(t)})}function V(e){return q.delete("api/student/delete/".concat(e.id))}var X=Q.a.mark(ne),Z=Q.a.mark(ae),$=Q.a.mark(re),ee=Q.a.mark(ce),te=Q.a.mark(se);function ne(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.c)(m,ae);case 2:return e.next=4,Object(Y.c)(y,re);case 4:return e.next=6,Object(Y.c)(N,ce);case 6:return e.next=8,Object(Y.c)(S,se);case 8:case"end":return e.stop()}}),X)}function ae(e){var t;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Y.a)(z,e.data);case 3:return t=n.sent,n.next=6,Object(Y.b)({type:x,payload:t});case 6:return n.next=8,Object(Y.b)(k());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Y.b)({type:O,error:n.t0});case 14:case"end":return n.stop()}}),Z,null,[[0,10]])}function re(){var e;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Y.a)(G);case 3:return e=t.sent,t.next=6,Object(Y.b)({type:g,payload:e});case 6:return t.next=8,Object(Y.b)(k());case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(Y.b)({type:O,error:t.t0});case 14:case"end":return t.stop()}}),$,null,[[0,10]])}function ce(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Y.a)(K,e.data);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Y.b)({type:O,error:t.t0});case 9:case"end":return t.stop()}}),ee,null,[[0,5]])}function se(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Y.a)(V,e.data);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(Y.b)({type:O,error:t.t0});case 9:case"end":return t.stop()}}),te,null,[[0,5]])}var ie=n(16),le={result:[],fields:[]},ue={alert:{state:!1,error:""}},oe=Object(J.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(ie.a)(Object(ie.a)({},e),{},{alert:{state:!0,error:t.error.toString()}});case v:return Object(ie.a)(Object(ie.a)({},e),{},{alert:{state:!1,error:""}});default:return e}},fetchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(ie.a)(Object(ie.a)({},e),{},{result:t.payload});case g:return Object(ie.a)(Object(ie.a)({},e),{},{fields:t.payload});default:return e}}}),de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},he=Object(W.a)(),be=Object(J.e)(oe,Object(J.a)(he));he.run(ne),s.a.render(Object(a.jsx)(f.a,{store:be,children:Object(a.jsx)(P,{})}),document.getElementById("root")),de()}},[[77,1,2]]]);
//# sourceMappingURL=main.d8519315.chunk.js.map